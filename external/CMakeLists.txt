if(EXISTS ${EXTERNAL_DIR}/nanobind)
    add_subdirectory(${EXTERNAL_DIR}/nanobind)
    message(STATUS "Using bundled nanobind")
else()
    message(FATAL_ERROR "nanobind not found. Run: python scripts/fetch_dependencies.py")
endif()

if(EXISTS ${EXTERNAL_DIR}/volk)
    if(WIN32)
        set(VOLK_STATIC_DEFINES VK_USE_PLATFORM_WIN32_KHR)
        message(STATUS "Platform: Windows - using VK_USE_PLATFORM_WIN32_KHR")
    else()
        message(WARNING "Unknown platform - Vulkan may not work correctly")
    endif()

    add_subdirectory(${EXTERNAL_DIR}/volk)
    set_property(TARGET volk PROPERTY FOLDER "external")
    message(STATUS "Using bundled volk")
else()
    message(FATAL_ERROR "volk not found. Run: python scripts/fetch_dependencies.py")
endif()

if(EXISTS ${EXTERNAL_DIR}/entt)
    add_library(entt INTERFACE)
    target_include_directories(entt INTERFACE ${EXTERNAL_DIR}/entt/src)
    target_compile_definitions(entt INTERFACE ENTT_USE_ATOMIC=ON)
    
    set_property(TARGET entt PROPERTY FOLDER "external")
    message(STATUS "Using bundled entt")
else()
    message(FATAL_ERROR "entt not found. Run: python scripts/fetch_dependencies.py")
endif()